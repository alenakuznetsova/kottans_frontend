<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Memory pair game</title>
    <link rel="stylesheet" type="text/css" href="style.css">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">
</head>
<body>
    <div class="container">
        <div class="row justify-content-md-center">
            <div class="col-md-10">
                <h1 class="title text-center">Memory pair game</h1>
            </div>
        </div>
        <div class="row justify-content-md-center mx-auto">
            <center>
                <div class="col-md-12">                    
                    <ul id="matrix" class="flip-container"></ul>                    
                </div>
            </center>
        </div>
    </div>

    <script>
        var arr = [];
        var compareArr = [];

        function Image (url, name){
            this.id = '' + (Math.floor(Math.random() * (99999 - 10000 + 1)) + 10000);
            this.name = name;
            this.url = url; 
            var that = this;
            this.change = function(){
                var f = that.url;
                if ( this.className === 'img-list back') {                     
                    this.style.transform = 'rotateY(180deg)';                    
                    this.style.background = 'url'+ '(' + f + ')' + 'center no-repeat';
                    this.className = 'img-list front';                 
                    
                } else {  
                    this.style.transform = 'rotateY(0deg)';                 
                    this.className = 'img-list back';
                    this.style.background = 'white';
                                     
                } 
            }          
        }        

        addObjInArr('images/batman.jpg', 'batman');
        addObjInArr('images/captain.jpg', 'captain');
        addObjInArr('images/halk.jpg', 'halk');
        addObjInArr('images/iron.jpg', 'iron');
        addObjInArr('images/superman.jpg', 'superman');
        addObjInArr('images/punisher.jpg', 'punisher');

        // this.change = function(){
        //     var f = that.url;
        //     if ( this.className === 'img-list back') {                     
        //         this.style.transform = 'rotateY(180deg)';
        //         // this.nextSibling.style.transform = 'rotateY(180deg)';                    
        //         this.style.background = 'url'+ '(' + f + ')' + 'center no-repeat';
        //         this.className = 'img-list front';
        //         // this.src = ''+ url;                    
                
        //     } else {  
        //         this.style.transform = 'rotateY(0deg)';
        //         // this.nextSibling.style.transform = 'rotateY(0deg)';                 
        //         this.className = 'img-list back';
        //         this.nextSibling.className = 'img-list front';
        //         this.style.background = 'white';
                                    
        //     } 
        // }

        function shuffle(o) {
            for(var j, x, i = o.length; i; j = parseInt(Math.random() * i), x = o[--i], o[i] = o[j], o[j] = x);
            return o;
        };

        function addObjInArr(obj) {
            var i = new Image(obj);
            arr.push(i);
            arr.push(i);
        }     

        function printImg() {               
            shuffle(arr);
            var list = document.getElementById('matrix');
            for(var i = 0; i < arr.length; i++) {
                for(var j = 0; j < 4; j++) {
                    var newLi = document.createElement('li');
                    newLi.className = 'flipper';
                    list.appendChild(newLi);
                    
                    var newBackImg = document.createElement('img');
                    newLi.appendChild(newBackImg);
                    newBackImg.style.transform = 'rotateY(0deg)';
                    newBackImg.className = 'img-list back';                    
                    newBackImg.onclick = arr[j].change;
                    
                    var newFrontImg= document.createElement('img');
                    newFrontImg.id = arr[j].id;
                    newFrontImg.className = 'img-list front';
                    newFrontImg.style.transform = 'rotateY(0deg)';
                    newFrontImg.onclick = arr[j].change;
                    newLi.appendChild(newFrontImg);
                } 
                arr.splice(0,4);                
                var newBr = document.createElement('br');
                list.appendChild(newBr);
            }           
        }    



        // console.log(compareArr);   

        // function compareImg() {
        //     if(this.open === false) {
        //         alert('open');
        //     }
        // }

        printImg();
        // compareImg();
    </script>
</body>
</html>